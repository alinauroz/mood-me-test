<html>
    <head>
        <title>Emotion Charts</title>
        <script type="text/javascript" src="https://unpkg.com/lodash@4.17.20/lodash.min.js"></script>
        <script type="text/javascript"src="./emotions.js"></script>
        <script>

            function getUsers (data) {
                const users = new Set();
                data.forEach(entry => users.add(entry.participantId));
                return Array.from(users);
            }

            window.onload = () => {

                /**
                 * creates a input[type=button]
                 * @param   {String}       value
                 * @param   {function}     onClick  
                 * @returns {HTMLElement}
                */

                function Button ({value, onClick}) {
                    let button = document.createElement('input');
                    button.type = 'button';
                    button.value = value;
                    button.onclick = onClick;
                    return button;
                }

                /**
                 * returns a input[type=checkbox] wrapped in a container
                 * @param   {String}    label
                 * @param   {String}    id
                 * @param   {function}  onChecked
                 * @param   {function}  onUnchecked
                 * @returns {HTMLElement}
                */

                function CheckBox ({label, id, onChecked = null, onUnchecked = null}) {
                    let container = document.createElement('span')
                    let callback = document.createElement('input');
                    let _label = document.createElement('label');

                    callback.type = 'checkbox';
                    callback.id = id;
                    callback.onclick = (e) => e.target.checked ? onChecked(e) : onUnchecked(e);

                    _label.innerHTML = label;
                    _label.setAttribute('for', id);
                    container.appendChild(callback);
                    container.appendChild(_label);

                    return container;
                }

                /**
                 * renders an array of HTML elements in container
                 * @param   {Array.<HTMLElement>}   elements
                 * @param   {HTMLElement}           container
                */

                function render (elements, container) {
                    elements.forEach(el => container.append( el ));
                }

                let users = getUsers(EMOTIONS.data);
                const usersToRender = new Set(users);

                render(
                    [CheckBox({label: 'Hello', id: 'aone', onChecked: () => alert('checked'), onUnchecked: () => alert('unchecked')})],
                    document.body
                )

            }

        </script>
    </head>
    <body>

    </body>
</html>